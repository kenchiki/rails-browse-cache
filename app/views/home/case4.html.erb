<h1>Cache-Control: no-cache, private, max-age=10を設定した場合</h1>
<h2 class="mt-4">Railsによる現在の時間</h2>
<p><%= Time.current.strftime('%T') %></p>
<p><%= link_to '他のページに遷移', home_case4_other_path %></p>
<h2 class="mt-4">JSによる時間出力</h2>
<script>
  function outputTime() {
    document.open()
    const now = new Date()

    document.write(now.getHours() + ':' + now.getMinutes() + ':' + now.getSeconds())
    document.close()
  }
  outputTime()
</script>
<h2 class="mt-4">豆知識</h2>
<div class="group mt-4">
  <div class="wysiwyg">
    <h3>結論</h3>
    <ul>
      <li>10秒間、キャッシュが残って時間は更新されない</li>
    </ul>
    <h3 class="mt-4">注意としてブラウザのリロードには対応していない</h3>
    <ul>
      <li>ユーザーがリロードした=新しい情報を欲しがっていると思っているからというアルゴリズムらしい</li>
      <li>そのため、max-ageが効いているか調べる方法は別窓を開いてURLを貼り付けるか、同じリンク先をクリックするしかない</li>
    </ul>
    <h3 class="mt-4">railsにはmax-ageを設定する便利関数がある</h3>
    <ul>
      <li>expires_in 10.seconds</li>
    </ul>
    <h3 class="mt-4">chromeのdeveloper toolでの確認方法</h3>
    <ul>
      <li>(disk cache)の文字が確認できる</li>
    </ul>
  </div>
</div>
